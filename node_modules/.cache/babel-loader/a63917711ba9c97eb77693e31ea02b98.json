{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*!\n * Vue-Lazyload.js v1.3.4\n * (c) 2021 Awe <hilongjw@gmail.com>\n * Released under the MIT License.\n */\n\n/*!\n * is-primitive <https://github.com/jonschlinkert/is-primitive>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n// see http://jsperf.com/testing-value-is-primitive/7\nvar isPrimitive = function isPrimitive(value) {\n  return value == null || typeof value !== 'function' && typeof value !== 'object';\n};\n\nvar isPrimitive$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': isPrimitive,\n  __moduleExports: isPrimitive\n});\n/*!\n * assign-symbols <https://github.com/jonschlinkert/assign-symbols>\n *\n * Copyright (c) 2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nvar assignSymbols = function (receiver, objects) {\n  if (receiver === null || typeof receiver === 'undefined') {\n    throw new TypeError('expected first argument to be an object.');\n  }\n\n  if (typeof objects === 'undefined' || typeof Symbol === 'undefined') {\n    return receiver;\n  }\n\n  if (typeof Object.getOwnPropertySymbols !== 'function') {\n    return receiver;\n  }\n\n  var isEnumerable = Object.prototype.propertyIsEnumerable;\n  var target = Object(receiver);\n  var len = arguments.length,\n      i = 0;\n\n  while (++i < len) {\n    var provider = Object(arguments[i]);\n    var names = Object.getOwnPropertySymbols(provider);\n\n    for (var j = 0; j < names.length; j++) {\n      var key = names[j];\n\n      if (isEnumerable.call(provider, key)) {\n        target[key] = provider[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar assignSymbols$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': assignSymbols,\n  __moduleExports: assignSymbols\n});\nvar toString = Object.prototype.toString;\n/**\n * Get the native `typeof` a value.\n *\n * @param  {*} `val`\n * @return {*} Native javascript type\n */\n\nvar kindOf = function kindOf(val) {\n  var type = typeof val; // primitivies\n\n  if (type === 'undefined') {\n    return 'undefined';\n  }\n\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === true || val === false || val instanceof Boolean) {\n    return 'boolean';\n  }\n\n  if (type === 'string' || val instanceof String) {\n    return 'string';\n  }\n\n  if (type === 'number' || val instanceof Number) {\n    return 'number';\n  } // functions\n\n\n  if (type === 'function' || val instanceof Function) {\n    if (typeof val.constructor.name !== 'undefined' && val.constructor.name.slice(0, 9) === 'Generator') {\n      return 'generatorfunction';\n    }\n\n    return 'function';\n  } // array\n\n\n  if (typeof Array.isArray !== 'undefined' && Array.isArray(val)) {\n    return 'array';\n  } // check for instances of RegExp and Date before calling `toString`\n\n\n  if (val instanceof RegExp) {\n    return 'regexp';\n  }\n\n  if (val instanceof Date) {\n    return 'date';\n  } // other objects\n\n\n  type = toString.call(val);\n\n  if (type === '[object RegExp]') {\n    return 'regexp';\n  }\n\n  if (type === '[object Date]') {\n    return 'date';\n  }\n\n  if (type === '[object Arguments]') {\n    return 'arguments';\n  }\n\n  if (type === '[object Error]') {\n    return 'error';\n  }\n\n  if (type === '[object Promise]') {\n    return 'promise';\n  } // buffer\n\n\n  if (isBuffer(val)) {\n    return 'buffer';\n  } // es6: Map, WeakMap, Set, WeakSet\n\n\n  if (type === '[object Set]') {\n    return 'set';\n  }\n\n  if (type === '[object WeakSet]') {\n    return 'weakset';\n  }\n\n  if (type === '[object Map]') {\n    return 'map';\n  }\n\n  if (type === '[object WeakMap]') {\n    return 'weakmap';\n  }\n\n  if (type === '[object Symbol]') {\n    return 'symbol';\n  }\n\n  if (type === '[object Map Iterator]') {\n    return 'mapiterator';\n  }\n\n  if (type === '[object Set Iterator]') {\n    return 'setiterator';\n  }\n\n  if (type === '[object String Iterator]') {\n    return 'stringiterator';\n  }\n\n  if (type === '[object Array Iterator]') {\n    return 'arrayiterator';\n  } // typed arrays\n\n\n  if (type === '[object Int8Array]') {\n    return 'int8array';\n  }\n\n  if (type === '[object Uint8Array]') {\n    return 'uint8array';\n  }\n\n  if (type === '[object Uint8ClampedArray]') {\n    return 'uint8clampedarray';\n  }\n\n  if (type === '[object Int16Array]') {\n    return 'int16array';\n  }\n\n  if (type === '[object Uint16Array]') {\n    return 'uint16array';\n  }\n\n  if (type === '[object Int32Array]') {\n    return 'int32array';\n  }\n\n  if (type === '[object Uint32Array]') {\n    return 'uint32array';\n  }\n\n  if (type === '[object Float32Array]') {\n    return 'float32array';\n  }\n\n  if (type === '[object Float64Array]') {\n    return 'float64array';\n  } // must be a plain object\n\n\n  return 'object';\n};\n/**\n * If you need to support Safari 5-7 (8-10 yr-old browser),\n * take a look at https://github.com/feross/is-buffer\n */\n\n\nfunction isBuffer(val) {\n  return val.constructor && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\nvar kindOf$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': kindOf,\n  __moduleExports: kindOf\n});\nvar isPrimitive$2 = isPrimitive$1 && isPrimitive || isPrimitive$1;\nvar assignSymbols$2 = assignSymbols$1 && assignSymbols || assignSymbols$1;\nvar typeOf = kindOf$1 && kindOf || kindOf$1;\n\nfunction assign(target\n/*, objects*/\n) {\n  target = target || {};\n  var len = arguments.length,\n      i = 0;\n\n  if (len === 1) {\n    return target;\n  }\n\n  while (++i < len) {\n    var val = arguments[i];\n\n    if (isPrimitive$2(target)) {\n      target = val;\n    }\n\n    if (isObject(val)) {\n      extend(target, val);\n    }\n  }\n\n  return target;\n}\n/**\n * Shallow extend\n */\n\n\nfunction extend(target, obj) {\n  assignSymbols$2(target, obj);\n\n  for (var key in obj) {\n    if (isValidKey(key) && hasOwn(obj, key)) {\n      var val = obj[key];\n\n      if (isObject(val)) {\n        if (typeOf(target[key]) === 'undefined' && typeOf(val) === 'function') {\n          target[key] = val;\n        }\n\n        target[key] = assign(target[key] || {}, val);\n      } else {\n        target[key] = val;\n      }\n    }\n  }\n\n  return target;\n}\n/**\n * Returns true if the object is a plain object or a function.\n */\n\n\nfunction isObject(obj) {\n  return typeOf(obj) === 'object' || typeOf(obj) === 'function';\n}\n/**\n * Returns true if the given `key` is an own property of `obj`.\n */\n\n\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n/**\n * Returns true if the given `key` is a valid key that can be used for assigning properties.\n */\n\n\nfunction isValidKey(key) {\n  return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n}\n/**\n * Expose `assign`\n */\n\n\nvar assignDeep = assign;\nconst inBrowser = typeof window !== 'undefined' && window !== null;\nconst hasIntersectionObserver = checkIntersectionObserver();\n\nfunction checkIntersectionObserver() {\n  if (inBrowser && 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/w3c/IntersectionObserver/issues/211\n    if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get: function () {\n          return this.intersectionRatio > 0;\n        }\n      });\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nconst modeType = {\n  event: 'event',\n  observer: 'observer' // CustomEvent polyfill for IE\n\n};\n\nconst CustomEvent = function () {\n  if (!inBrowser) return; // not IE\n\n  if (typeof window.CustomEvent === 'function') return window.CustomEvent;\n\n  function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n  return CustomEvent;\n}();\n\nfunction remove(arr, item) {\n  if (!arr.length) return;\n  const index = arr.indexOf(item);\n  if (index > -1) return arr.splice(index, 1);\n}\n\nfunction some(arr, fn) {\n  let has = false;\n\n  for (let i = 0, len = arr.length; i < len; i++) {\n    if (fn(arr[i])) {\n      has = true;\n      break;\n    }\n  }\n\n  return has;\n}\n\nfunction getBestSelectionFromSrcset(el, scale) {\n  if (el.tagName !== 'IMG' || !el.getAttribute('data-srcset')) return;\n  let options = el.getAttribute('data-srcset');\n  const result = [];\n  const container = el.parentNode;\n  const containerWidth = container.offsetWidth * scale;\n  let spaceIndex;\n  let tmpSrc;\n  let tmpWidth;\n  options = options.trim().split(',');\n  options.map(item => {\n    item = item.trim();\n    spaceIndex = item.lastIndexOf(' ');\n\n    if (spaceIndex === -1) {\n      tmpSrc = item;\n      tmpWidth = 999998;\n    } else {\n      tmpSrc = item.substr(0, spaceIndex);\n      tmpWidth = parseInt(item.substr(spaceIndex + 1, item.length - spaceIndex - 2), 10);\n    }\n\n    result.push([tmpWidth, tmpSrc]);\n  });\n  result.sort(function (a, b) {\n    if (a[0] < b[0]) {\n      return 1;\n    }\n\n    if (a[0] > b[0]) {\n      return -1;\n    }\n\n    if (a[0] === b[0]) {\n      if (b[1].indexOf('.webp', b[1].length - 5) !== -1) {\n        return 1;\n      }\n\n      if (a[1].indexOf('.webp', a[1].length - 5) !== -1) {\n        return -1;\n      }\n    }\n\n    return 0;\n  });\n  let bestSelectedSrc = '';\n  let tmpOption;\n\n  for (let i = 0; i < result.length; i++) {\n    tmpOption = result[i];\n    bestSelectedSrc = tmpOption[1];\n    const next = result[i + 1];\n\n    if (next && next[0] < containerWidth) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    } else if (!next) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    }\n  }\n\n  return bestSelectedSrc;\n}\n\nfunction find(arr, fn) {\n  let item;\n\n  for (let i = 0, len = arr.length; i < len; i++) {\n    if (fn(arr[i])) {\n      item = arr[i];\n      break;\n    }\n  }\n\n  return item;\n}\n\nconst getDPR = (scale = 1) => inBrowser ? window.devicePixelRatio || scale : scale;\n\nfunction supportWebp() {\n  if (!inBrowser) return false;\n  let support = true;\n\n  try {\n    const elem = document.createElement('canvas');\n\n    if (elem.getContext && elem.getContext('2d')) {\n      support = elem.toDataURL('image/webp').indexOf('data:image/webp') === 0;\n    }\n  } catch (err) {\n    support = false;\n  }\n\n  return support;\n}\n\nfunction throttle(action, delay) {\n  let timeout = null;\n  let movement = null;\n  let lastRun = 0;\n  let needRun = false;\n  return function () {\n    needRun = true;\n\n    if (timeout) {\n      return;\n    }\n\n    let elapsed = Date.now() - lastRun;\n    let context = this;\n    let args = arguments;\n\n    let runCallback = function () {\n      lastRun = Date.now();\n      timeout = false;\n      action.apply(context, args);\n    };\n\n    if (elapsed >= delay) {\n      runCallback();\n    } else {\n      timeout = setTimeout(runCallback, delay);\n    }\n\n    if (needRun) {\n      clearTimeout(movement);\n      movement = setTimeout(runCallback, 2 * delay);\n    }\n  };\n}\n\nfunction testSupportsPassive() {\n  if (!inBrowser) return;\n  let support = false;\n\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        support = true;\n      }\n    });\n    window.addEventListener('test', null, opts);\n  } catch (e) {}\n\n  return support;\n}\n\nconst supportsPassive = testSupportsPassive();\nconst _ = {\n  on(el, type, func, capture = false) {\n    if (supportsPassive) {\n      el.addEventListener(type, func, {\n        capture: capture,\n        passive: true\n      });\n    } else {\n      el.addEventListener(type, func, capture);\n    }\n  },\n\n  off(el, type, func, capture = false) {\n    el.removeEventListener(type, func, capture);\n  }\n\n};\n\nconst loadImageAsync = (item, resolve, reject) => {\n  let image = new Image();\n\n  if (!item || !item.src) {\n    const err = new Error('image src is required');\n    return reject(err);\n  }\n\n  image.src = item.src;\n\n  if (item.cors) {\n    image.crossOrigin = item.cors;\n  }\n\n  image.onload = function () {\n    resolve({\n      naturalHeight: image.naturalHeight,\n      naturalWidth: image.naturalWidth,\n      src: image.src\n    });\n  };\n\n  image.onerror = function (e) {\n    reject(e);\n  };\n};\n\nconst style = (el, prop) => {\n  return typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop];\n};\n\nconst overflow = el => {\n  return style(el, 'overflow') + style(el, 'overflow-y') + style(el, 'overflow-x');\n};\n\nconst scrollParent = el => {\n  if (!inBrowser) return;\n\n  if (!(el instanceof HTMLElement)) {\n    return window;\n  }\n\n  let parent = el;\n\n  while (parent) {\n    if (parent === document.body || parent === document.documentElement) {\n      break;\n    }\n\n    if (!parent.parentNode) {\n      break;\n    }\n\n    if (/(scroll|auto)/.test(overflow(parent))) {\n      return parent;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return window;\n};\n\nfunction isObject$1(obj) {\n  return obj !== null && typeof obj === 'object';\n}\n\nfunction ObjectKeys(obj) {\n  if (!(obj instanceof Object)) return [];\n\n  if (Object.keys) {\n    return Object.keys(obj);\n  } else {\n    let keys = [];\n\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        keys.push(key);\n      }\n    }\n\n    return keys;\n  }\n}\n\nfunction ArrayFrom(arrLike) {\n  let len = arrLike.length;\n  const list = [];\n\n  for (let i = 0; i < len; i++) {\n    list.push(arrLike[i]);\n  }\n\n  return list;\n}\n\nfunction noop() {}\n\nclass ImageCache {\n  constructor({\n    max\n  }) {\n    this.options = {\n      max: max || 100\n    };\n    this._caches = [];\n  }\n\n  has(key) {\n    return this._caches.indexOf(key) > -1;\n  }\n\n  add(key) {\n    if (this.has(key)) return;\n\n    this._caches.push(key);\n\n    if (this._caches.length > this.options.max) {\n      this.free();\n    }\n  }\n\n  free() {\n    this._caches.shift();\n  }\n\n} // el: {\n//     state,\n//     src,\n//     error,\n//     loading\n// }\n\n\nclass ReactiveListener {\n  constructor({\n    el,\n    src,\n    error,\n    loading,\n    bindType,\n    $parent,\n    options,\n    cors,\n    elRenderer,\n    imageCache\n  }) {\n    this.el = el;\n    this.src = src;\n    this.error = error;\n    this.loading = loading;\n    this.bindType = bindType;\n    this.attempt = 0;\n    this.cors = cors;\n    this.naturalHeight = 0;\n    this.naturalWidth = 0;\n    this.options = options;\n    this.rect = null;\n    this.$parent = $parent;\n    this.elRenderer = elRenderer;\n    this._imageCache = imageCache;\n    this.performanceData = {\n      init: Date.now(),\n      loadStart: 0,\n      loadEnd: 0\n    };\n    this.filter();\n    this.initState();\n    this.render('loading', false);\n  }\n  /*\n   * init listener state\n   * @return\n   */\n\n\n  initState() {\n    if ('dataset' in this.el) {\n      this.el.dataset.src = this.src;\n    } else {\n      this.el.setAttribute('data-src', this.src);\n    }\n\n    this.state = {\n      loading: false,\n      error: false,\n      loaded: false,\n      rendered: false\n    };\n  }\n  /*\n   * record performance\n   * @return\n   */\n\n\n  record(event) {\n    this.performanceData[event] = Date.now();\n  }\n  /*\n   * update image listener data\n   * @param  {String} image uri\n   * @param  {String} loading image uri\n   * @param  {String} error image uri\n   * @return\n   */\n\n\n  update({\n    src,\n    loading,\n    error\n  }) {\n    const oldSrc = this.src;\n    this.src = src;\n    this.loading = loading;\n    this.error = error;\n    this.filter();\n\n    if (oldSrc !== this.src) {\n      this.attempt = 0;\n      this.initState();\n    }\n  }\n  /*\n   * get el node rect\n   * @return\n   */\n\n\n  getRect() {\n    this.rect = this.el.getBoundingClientRect();\n  }\n  /*\n   *  check el is in view\n   * @return {Boolean} el is in view\n   */\n\n\n  checkInView() {\n    this.getRect();\n    return this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;\n  }\n  /*\n   * listener filter\n   */\n\n\n  filter() {\n    ObjectKeys(this.options.filter).map(key => {\n      this.options.filter[key](this, this.options);\n    });\n  }\n  /*\n   * render loading first\n   * @params cb:Function\n   * @return\n   */\n\n\n  renderLoading(cb) {\n    this.state.loading = true;\n    loadImageAsync({\n      src: this.loading,\n      cors: this.cors\n    }, data => {\n      this.render('loading', false);\n      this.state.loading = false;\n      cb();\n    }, () => {\n      // handler `loading image` load failed\n      cb();\n      this.state.loading = false;\n      if (!this.options.silent) console.warn(`VueLazyload log: load failed with loading image(${this.loading})`);\n    });\n  }\n  /*\n   * try load image and  render it\n   * @return\n   */\n\n\n  load(onFinish = noop) {\n    if (this.attempt > this.options.attempt - 1 && this.state.error) {\n      if (!this.options.silent) console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`);\n      onFinish();\n      return;\n    }\n\n    if (this.state.rendered && this.state.loaded) return;\n\n    if (this._imageCache.has(this.src)) {\n      this.state.loaded = true;\n      this.render('loaded', true);\n      this.state.rendered = true;\n      return onFinish();\n    }\n\n    this.renderLoading(() => {\n      this.attempt++;\n      this.options.adapter['beforeLoad'] && this.options.adapter['beforeLoad'](this, this.options);\n      this.record('loadStart');\n      loadImageAsync({\n        src: this.src,\n        cors: this.cors\n      }, data => {\n        this.naturalHeight = data.naturalHeight;\n        this.naturalWidth = data.naturalWidth;\n        this.state.loaded = true;\n        this.state.error = false;\n        this.record('loadEnd');\n        this.render('loaded', false);\n        this.state.rendered = true;\n\n        this._imageCache.add(this.src);\n\n        onFinish();\n      }, err => {\n        !this.options.silent && console.error(err);\n        this.state.error = true;\n        this.state.loaded = false;\n        this.render('error', false);\n      });\n    });\n  }\n  /*\n   * render image\n   * @param  {String} state to render // ['loading', 'src', 'error']\n   * @param  {String} is form cache\n   * @return\n   */\n\n\n  render(state, cache) {\n    this.elRenderer(this, state, cache);\n  }\n  /*\n   * output performance data\n   * @return {Object} performance data\n   */\n\n\n  performance() {\n    let state = 'loading';\n    let time = 0;\n\n    if (this.state.loaded) {\n      state = 'loaded';\n      time = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1000;\n    }\n\n    if (this.state.error) state = 'error';\n    return {\n      src: this.src,\n      state,\n      time\n    };\n  }\n  /*\n   * $destroy\n   * @return\n   */\n\n\n  $destroy() {\n    this.el = null;\n    this.src = null;\n    this.error = null;\n    this.loading = null;\n    this.bindType = null;\n    this.attempt = 0;\n  }\n\n}\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nconst DEFAULT_EVENTS = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'];\nconst DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: '0px',\n  threshold: 0\n};\n\nfunction Lazy(Vue) {\n  return class Lazy {\n    constructor({\n      preLoad,\n      error,\n      throttleWait,\n      preLoadTop,\n      dispatchEvent,\n      loading,\n      attempt,\n      silent = true,\n      scale,\n      listenEvents,\n      hasbind,\n      filter,\n      adapter,\n      observer,\n      observerOptions\n    }) {\n      this.version = '\"1.3.4\"';\n      this.mode = modeType.event;\n      this.ListenerQueue = [];\n      this.TargetIndex = 0;\n      this.TargetQueue = [];\n      this.options = {\n        silent: silent,\n        dispatchEvent: !!dispatchEvent,\n        throttleWait: throttleWait || 200,\n        preLoad: preLoad || 1.3,\n        preLoadTop: preLoadTop || 0,\n        error: error || DEFAULT_URL,\n        loading: loading || DEFAULT_URL,\n        attempt: attempt || 3,\n        scale: scale || getDPR(scale),\n        ListenEvents: listenEvents || DEFAULT_EVENTS,\n        hasbind: false,\n        supportWebp: supportWebp(),\n        filter: filter || {},\n        adapter: adapter || {},\n        observer: !!observer,\n        observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n      };\n\n      this._initEvent();\n\n      this._imageCache = new ImageCache({\n        max: 200\n      });\n      this.lazyLoadHandler = throttle(this._lazyLoadHandler.bind(this), this.options.throttleWait);\n      this.setMode(this.options.observer ? modeType.observer : modeType.event);\n    }\n    /**\n     * update config\n     * @param  {Object} config params\n     * @return\n     */\n\n\n    config(options = {}) {\n      assignDeep(this.options, options);\n    }\n    /**\n     * output listener's load performance\n     * @return {Array}\n     */\n\n\n    performance() {\n      let list = [];\n      this.ListenerQueue.map(item => {\n        list.push(item.performance());\n      });\n      return list;\n    }\n    /*\n     * add lazy component to queue\n     * @param  {Vue} vm lazy component instance\n     * @return\n     */\n\n\n    addLazyBox(vm) {\n      this.ListenerQueue.push(vm);\n\n      if (inBrowser) {\n        this._addListenerTarget(window);\n\n        this._observer && this._observer.observe(vm.el);\n\n        if (vm.$el && vm.$el.parentNode) {\n          this._addListenerTarget(vm.$el.parentNode);\n        }\n      }\n    }\n    /*\n     * add image listener to queue\n     * @param  {DOM} el\n     * @param  {object} binding vue directive binding\n     * @param  {vnode} vnode vue directive vnode\n     * @return\n     */\n\n\n    add(el, binding, vnode) {\n      if (some(this.ListenerQueue, item => item.el === el)) {\n        this.update(el, binding);\n        return Vue.nextTick(this.lazyLoadHandler);\n      }\n\n      let {\n        src,\n        loading,\n        error,\n        cors\n      } = this._valueFormatter(binding.value);\n\n      Vue.nextTick(() => {\n        src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n        this._observer && this._observer.observe(el);\n        const container = Object.keys(binding.modifiers)[0];\n        let $parent;\n\n        if (container) {\n          $parent = vnode.context.$refs[container]; // if there is container passed in, try ref first, then fallback to getElementById to support the original usage\n\n          $parent = $parent ? $parent.$el || $parent : document.getElementById(container);\n        }\n\n        if (!$parent) {\n          $parent = scrollParent(el);\n        }\n\n        const newListener = new ReactiveListener({\n          bindType: binding.arg,\n          $parent,\n          el,\n          loading,\n          error,\n          src,\n          cors,\n          elRenderer: this._elRenderer.bind(this),\n          options: this.options,\n          imageCache: this._imageCache\n        });\n        this.ListenerQueue.push(newListener);\n\n        if (inBrowser) {\n          this._addListenerTarget(window);\n\n          this._addListenerTarget($parent);\n        }\n\n        this.lazyLoadHandler();\n        Vue.nextTick(() => this.lazyLoadHandler());\n      });\n    }\n    /**\n    * update image src\n    * @param  {DOM} el\n    * @param  {object} vue directive binding\n    * @return\n    */\n\n\n    update(el, binding, vnode) {\n      let {\n        src,\n        loading,\n        error\n      } = this._valueFormatter(binding.value);\n\n      src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n      const exist = find(this.ListenerQueue, item => item.el === el);\n\n      if (!exist) {\n        this.add(el, binding, vnode);\n      } else {\n        exist.update({\n          src,\n          loading,\n          error\n        });\n      }\n\n      if (this._observer) {\n        this._observer.unobserve(el);\n\n        this._observer.observe(el);\n      }\n\n      this.lazyLoadHandler();\n      Vue.nextTick(() => this.lazyLoadHandler());\n    }\n    /**\n    * remove listener form list\n    * @param  {DOM} el\n    * @return\n    */\n\n\n    remove(el) {\n      if (!el) return;\n      this._observer && this._observer.unobserve(el);\n      const existItem = find(this.ListenerQueue, item => item.el === el);\n\n      if (existItem) {\n        this._removeListenerTarget(existItem.$parent);\n\n        this._removeListenerTarget(window);\n\n        remove(this.ListenerQueue, existItem);\n        existItem.$destroy();\n      }\n    }\n    /*\n     * remove lazy components form list\n     * @param  {Vue} vm Vue instance\n     * @return\n     */\n\n\n    removeComponent(vm) {\n      if (!vm) return;\n      remove(this.ListenerQueue, vm);\n      this._observer && this._observer.unobserve(vm.el);\n\n      if (vm.$parent && vm.$el.parentNode) {\n        this._removeListenerTarget(vm.$el.parentNode);\n      }\n\n      this._removeListenerTarget(window);\n    }\n\n    setMode(mode) {\n      if (!hasIntersectionObserver && mode === modeType.observer) {\n        mode = modeType.event;\n      }\n\n      this.mode = mode; // event or observer\n\n      if (mode === modeType.event) {\n        if (this._observer) {\n          this.ListenerQueue.forEach(listener => {\n            this._observer.unobserve(listener.el);\n          });\n          this._observer = null;\n        }\n\n        this.TargetQueue.forEach(target => {\n          this._initListen(target.el, true);\n        });\n      } else {\n        this.TargetQueue.forEach(target => {\n          this._initListen(target.el, false);\n        });\n\n        this._initIntersectionObserver();\n      }\n    }\n    /*\n    *** Private functions ***\n    */\n\n    /*\n     * add listener target\n     * @param  {DOM} el listener target\n     * @return\n     */\n\n\n    _addListenerTarget(el) {\n      if (!el) return;\n      let target = find(this.TargetQueue, target => target.el === el);\n\n      if (!target) {\n        target = {\n          el: el,\n          id: ++this.TargetIndex,\n          childrenCount: 1,\n          listened: true\n        };\n        this.mode === modeType.event && this._initListen(target.el, true);\n        this.TargetQueue.push(target);\n      } else {\n        target.childrenCount++;\n      }\n\n      return this.TargetIndex;\n    }\n    /*\n     * remove listener target or reduce target childrenCount\n     * @param  {DOM} el or window\n     * @return\n     */\n\n\n    _removeListenerTarget(el) {\n      this.TargetQueue.forEach((target, index) => {\n        if (target.el === el) {\n          target.childrenCount--;\n\n          if (!target.childrenCount) {\n            this._initListen(target.el, false);\n\n            this.TargetQueue.splice(index, 1);\n            target = null;\n          }\n        }\n      });\n    }\n    /*\n     * add or remove eventlistener\n     * @param  {DOM} el DOM or Window\n     * @param  {boolean} start flag\n     * @return\n     */\n\n\n    _initListen(el, start) {\n      this.options.ListenEvents.forEach(evt => _[start ? 'on' : 'off'](el, evt, this.lazyLoadHandler));\n    }\n\n    _initEvent() {\n      this.Event = {\n        listeners: {\n          loading: [],\n          loaded: [],\n          error: []\n        }\n      };\n\n      this.$on = (event, func) => {\n        if (!this.Event.listeners[event]) this.Event.listeners[event] = [];\n        this.Event.listeners[event].push(func);\n      };\n\n      this.$once = (event, func) => {\n        const vm = this;\n\n        function on() {\n          vm.$off(event, on);\n          func.apply(vm, arguments);\n        }\n\n        this.$on(event, on);\n      };\n\n      this.$off = (event, func) => {\n        if (!func) {\n          if (!this.Event.listeners[event]) return;\n          this.Event.listeners[event].length = 0;\n          return;\n        }\n\n        remove(this.Event.listeners[event], func);\n      };\n\n      this.$emit = (event, context, inCache) => {\n        if (!this.Event.listeners[event]) return;\n        this.Event.listeners[event].forEach(func => func(context, inCache));\n      };\n    }\n    /**\n     * find nodes which in viewport and trigger load\n     * @return\n     */\n\n\n    _lazyLoadHandler() {\n      const freeList = [];\n      this.ListenerQueue.forEach((listener, index) => {\n        if (!listener.el || !listener.el.parentNode) {\n          freeList.push(listener);\n        }\n\n        const catIn = listener.checkInView();\n        if (!catIn) return;\n        listener.load();\n      });\n      freeList.forEach(item => {\n        remove(this.ListenerQueue, item);\n        item.$destroy();\n      });\n    }\n    /**\n    * init IntersectionObserver\n    * set mode to observer\n    * @return\n    */\n\n\n    _initIntersectionObserver() {\n      if (!hasIntersectionObserver) return;\n      this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions);\n\n      if (this.ListenerQueue.length) {\n        this.ListenerQueue.forEach(listener => {\n          this._observer.observe(listener.el);\n        });\n      }\n    }\n    /**\n    * init IntersectionObserver\n    * @return\n    */\n\n\n    _observerHandler(entries, observer) {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.ListenerQueue.forEach(listener => {\n            if (listener.el === entry.target) {\n              if (listener.state.loaded) return this._observer.unobserve(listener.el);\n              listener.load();\n            }\n          });\n        }\n      });\n    }\n    /**\n    * set element attribute with image'url and state\n    * @param  {object} lazyload listener object\n    * @param  {string} state will be rendered\n    * @param  {bool} inCache  is rendered from cache\n    * @return\n    */\n\n\n    _elRenderer(listener, state, cache) {\n      if (!listener.el) return;\n      const {\n        el,\n        bindType\n      } = listener;\n      let src;\n\n      switch (state) {\n        case 'loading':\n          src = listener.loading;\n          break;\n\n        case 'error':\n          src = listener.error;\n          break;\n\n        default:\n          src = listener.src;\n          break;\n      }\n\n      if (bindType) {\n        el.style[bindType] = 'url(\"' + src + '\")';\n      } else if (el.getAttribute('src') !== src) {\n        el.setAttribute('src', src);\n      }\n\n      el.setAttribute('lazy', state);\n      this.$emit(state, listener, cache);\n      this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n\n      if (this.options.dispatchEvent) {\n        const event = new CustomEvent(state, {\n          detail: listener\n        });\n        el.dispatchEvent(event);\n      }\n    }\n    /**\n    * generate loading loaded error image url\n    * @param {string} image's src\n    * @return {object} image's loading, loaded, error url\n    */\n\n\n    _valueFormatter(value) {\n      let src = value;\n      let loading = this.options.loading;\n      let error = this.options.error; // value is object\n\n      if (isObject$1(value)) {\n        if (!value.src && !this.options.silent) console.error('Vue Lazyload warning: miss src with ' + value);\n        src = value.src;\n        loading = value.loading || this.options.loading;\n        error = value.error || this.options.error;\n      }\n\n      return {\n        src,\n        loading,\n        error\n      };\n    }\n\n  };\n}\n\nLazy.install = (Vue, options = {}) => {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  const isVue2 = Vue.version.split('.')[0] === '2';\n\n  if (isVue2) {\n    Vue.directive('lazy', {\n      bind: lazy.add.bind(lazy),\n      update: lazy.update.bind(lazy),\n      componentUpdated: lazy.lazyLoadHandler.bind(lazy),\n      unbind: lazy.remove.bind(lazy)\n    });\n  } else {\n    Vue.directive('lazy', {\n      bind: lazy.lazyLoadHandler.bind(lazy),\n\n      update(newValue, oldValue) {\n        assignDeep(this.vm.$refs, this.vm.$els);\n        lazy.add(this.el, {\n          modifiers: this.modifiers || {},\n          arg: this.arg,\n          value: newValue,\n          oldValue: oldValue\n        }, {\n          context: this.vm\n        });\n      },\n\n      unbind() {\n        lazy.remove(this.el);\n      }\n\n    });\n  }\n};\n\nconst LazyComponent = lazy => {\n  return {\n    props: {\n      tag: {\n        type: String,\n        default: 'div'\n      }\n    },\n\n    render(h) {\n      return h(this.tag, null, this.show ? this.$slots.default : null);\n    },\n\n    data() {\n      return {\n        el: null,\n        state: {\n          loaded: false\n        },\n        rect: {},\n        show: false\n      };\n    },\n\n    mounted() {\n      this.el = this.$el;\n      lazy.addLazyBox(this);\n      lazy.lazyLoadHandler();\n    },\n\n    beforeDestroy() {\n      lazy.removeComponent(this);\n    },\n\n    methods: {\n      getRect() {\n        this.rect = this.$el.getBoundingClientRect();\n      },\n\n      checkInView() {\n        this.getRect();\n        return inBrowser && this.rect.top < window.innerHeight * lazy.options.preLoad && this.rect.bottom > 0 && this.rect.left < window.innerWidth * lazy.options.preLoad && this.rect.right > 0;\n      },\n\n      load() {\n        this.show = true;\n        this.state.loaded = true;\n        this.$emit('show', this);\n      },\n\n      destroy() {\n        return this.$destroy;\n      }\n\n    }\n  };\n};\n\nLazyComponent.install = function (Vue, options = {}) {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  Vue.component('lazy-component', LazyComponent(lazy));\n};\n\nclass LazyContainerMananger {\n  constructor({\n    lazy\n  }) {\n    this.lazy = lazy;\n    lazy.lazyContainerMananger = this;\n    this._queue = [];\n  }\n\n  bind(el, binding, vnode) {\n    const container = new LazyContainer({\n      el,\n      binding,\n      vnode,\n      lazy: this.lazy\n    });\n\n    this._queue.push(container);\n  }\n\n  update(el, binding, vnode) {\n    const container = find(this._queue, item => item.el === el);\n    if (!container) return;\n    container.update({\n      el,\n      binding,\n      vnode\n    });\n  }\n\n  unbind(el, binding, vnode) {\n    const container = find(this._queue, item => item.el === el);\n    if (!container) return;\n    container.clear();\n    remove(this._queue, container);\n  }\n\n}\n\nconst defaultOptions = {\n  selector: 'img'\n};\n\nclass LazyContainer {\n  constructor({\n    el,\n    binding,\n    vnode,\n    lazy\n  }) {\n    this.el = null;\n    this.vnode = vnode;\n    this.binding = binding;\n    this.options = {};\n    this.lazy = lazy;\n    this._queue = [];\n    this.update({\n      el,\n      binding\n    });\n  }\n\n  update({\n    el,\n    binding\n  }) {\n    this.el = el;\n    this.options = assignDeep({}, defaultOptions, binding.value);\n    const imgs = this.getImgs();\n    imgs.forEach(el => {\n      this.lazy.add(el, assignDeep({}, this.binding, {\n        value: {\n          src: 'dataset' in el ? el.dataset.src : el.getAttribute('data-src'),\n          error: ('dataset' in el ? el.dataset.error : el.getAttribute('data-error')) || this.options.error,\n          loading: ('dataset' in el ? el.dataset.loading : el.getAttribute('data-loading')) || this.options.loading\n        }\n      }), this.vnode);\n    });\n  }\n\n  getImgs() {\n    return ArrayFrom(this.el.querySelectorAll(this.options.selector));\n  }\n\n  clear() {\n    const imgs = this.getImgs();\n    imgs.forEach(el => this.lazy.remove(el));\n    this.vnode = null;\n    this.binding = null;\n    this.lazy = null;\n  }\n\n}\n\nLazyContainer.install = (Vue, options = {}) => {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  const lazyContainer = new LazyContainer({\n    lazy\n  });\n  const isVue2 = Vue.version.split('.')[0] === '2';\n\n  if (isVue2) {\n    Vue.directive('lazy-container', {\n      bind: lazyContainer.bind.bind(lazyContainer),\n      componentUpdated: lazyContainer.update.bind(lazyContainer),\n      unbind: lazyContainer.unbind.bind(lazyContainer)\n    });\n  } else {\n    Vue.directive('lazy-container', {\n      update(newValue, oldValue) {\n        lazyContainer.update(this.el, {\n          modifiers: this.modifiers || {},\n          arg: this.arg,\n          value: newValue,\n          oldValue: oldValue\n        }, {\n          context: this.vm\n        });\n      },\n\n      unbind() {\n        lazyContainer.unbind(this.el);\n      }\n\n    });\n  }\n};\n\nconst LazyImage = lazyManager => {\n  return {\n    props: {\n      src: [String, Object],\n      tag: {\n        type: String,\n        default: 'img'\n      }\n    },\n\n    render(h) {\n      return h(this.tag, {\n        attrs: {\n          src: this.renderSrc\n        }\n      }, this.$slots.default);\n    },\n\n    data() {\n      return {\n        el: null,\n        options: {\n          src: '',\n          error: '',\n          loading: '',\n          attempt: lazyManager.options.attempt\n        },\n        state: {\n          loaded: false,\n          error: false,\n          attempt: 0\n        },\n        rect: {},\n        renderSrc: ''\n      };\n    },\n\n    watch: {\n      src() {\n        this.init();\n        lazyManager.addLazyBox(this);\n        lazyManager.lazyLoadHandler();\n      }\n\n    },\n\n    created() {\n      this.init();\n      this.renderSrc = this.options.loading;\n    },\n\n    mounted() {\n      this.el = this.$el;\n      lazyManager.addLazyBox(this);\n      lazyManager.lazyLoadHandler();\n    },\n\n    beforeDestroy() {\n      lazyManager.removeComponent(this);\n    },\n\n    methods: {\n      init() {\n        const {\n          src,\n          loading,\n          error\n        } = lazyManager._valueFormatter(this.src);\n\n        this.state.loaded = false;\n        this.options.src = src;\n        this.options.error = error;\n        this.options.loading = loading;\n        this.renderSrc = this.options.loading;\n      },\n\n      getRect() {\n        this.rect = this.$el.getBoundingClientRect();\n      },\n\n      checkInView() {\n        this.getRect();\n        return inBrowser && this.rect.top < window.innerHeight * lazyManager.options.preLoad && this.rect.bottom > 0 && this.rect.left < window.innerWidth * lazyManager.options.preLoad && this.rect.right > 0;\n      },\n\n      load(onFinish = noop) {\n        if (this.state.attempt > this.options.attempt - 1 && this.state.error) {\n          if (!lazyManager.options.silent) console.log(`VueLazyload log: ${this.options.src} tried too more than ${this.options.attempt} times`);\n          onFinish();\n          return;\n        }\n\n        const src = this.options.src;\n        loadImageAsync({\n          src\n        }, ({\n          src\n        }) => {\n          this.renderSrc = src;\n          this.state.loaded = true;\n        }, e => {\n          this.state.attempt++;\n          this.renderSrc = this.options.error;\n          this.state.error = true;\n        });\n      }\n\n    }\n  };\n};\n\nLazyImage.install = (Vue, options = {}) => {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  Vue.component('lazy-image', LazyImage(lazy));\n};\n\nvar index = {\n  /*\n  * install function\n  * @param  {Vue} Vue\n  * @param  {object} options  lazyload options\n  */\n  install(Vue, options = {}) {\n    const LazyClass = Lazy(Vue);\n    const lazy = new LazyClass(options);\n    const lazyContainer = new LazyContainerMananger({\n      lazy\n    });\n    const isVue2 = Vue.version.split('.')[0] === '2';\n    Vue.prototype.$Lazyload = lazy;\n\n    if (options.lazyComponent) {\n      Vue.component('lazy-component', LazyComponent(lazy));\n    }\n\n    if (options.lazyImage) {\n      Vue.component('lazy-image', LazyImage(lazy));\n    }\n\n    if (isVue2) {\n      Vue.directive('lazy', {\n        bind: lazy.add.bind(lazy),\n        update: lazy.update.bind(lazy),\n        componentUpdated: lazy.lazyLoadHandler.bind(lazy),\n        unbind: lazy.remove.bind(lazy)\n      });\n      Vue.directive('lazy-container', {\n        bind: lazyContainer.bind.bind(lazyContainer),\n        componentUpdated: lazyContainer.update.bind(lazyContainer),\n        unbind: lazyContainer.unbind.bind(lazyContainer)\n      });\n    } else {\n      Vue.directive('lazy', {\n        bind: lazy.lazyLoadHandler.bind(lazy),\n\n        update(newValue, oldValue) {\n          assignDeep(this.vm.$refs, this.vm.$els);\n          lazy.add(this.el, {\n            modifiers: this.modifiers || {},\n            arg: this.arg,\n            value: newValue,\n            oldValue: oldValue\n          }, {\n            context: this.vm\n          });\n        },\n\n        unbind() {\n          lazy.remove(this.el);\n        }\n\n      });\n      Vue.directive('lazy-container', {\n        update(newValue, oldValue) {\n          lazyContainer.update(this.el, {\n            modifiers: this.modifiers || {},\n            arg: this.arg,\n            value: newValue,\n            oldValue: oldValue\n          }, {\n            context: this.vm\n          });\n        },\n\n        unbind() {\n          lazyContainer.unbind(this.el);\n        }\n\n      });\n    }\n  }\n\n};\nexport default index;\nexport { Lazy, LazyComponent, LazyContainerMananger as LazyContainer, LazyImage };","map":{"version":3,"names":["isPrimitive","value","isPrimitive$1","Object","freeze","__proto__","__moduleExports","assignSymbols","receiver","objects","TypeError","Symbol","getOwnPropertySymbols","isEnumerable","prototype","propertyIsEnumerable","target","len","arguments","length","i","provider","names","j","key","call","assignSymbols$1","toString","kindOf","val","type","Boolean","String","Number","Function","constructor","name","slice","Array","isArray","RegExp","Date","isBuffer","kindOf$1","isPrimitive$2","assignSymbols$2","typeOf","assign","isObject","extend","obj","isValidKey","hasOwn","hasOwnProperty","assignDeep","inBrowser","window","hasIntersectionObserver","checkIntersectionObserver","IntersectionObserverEntry","defineProperty","get","intersectionRatio","modeType","event","observer","CustomEvent","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","Event","remove","arr","item","index","indexOf","splice","some","fn","has","getBestSelectionFromSrcset","el","scale","tagName","getAttribute","options","result","container","parentNode","containerWidth","offsetWidth","spaceIndex","tmpSrc","tmpWidth","trim","split","map","lastIndexOf","substr","parseInt","push","sort","a","b","bestSelectedSrc","tmpOption","next","find","getDPR","devicePixelRatio","supportWebp","support","elem","createElement","getContext","toDataURL","err","throttle","action","delay","timeout","movement","lastRun","needRun","elapsed","now","context","args","runCallback","apply","setTimeout","clearTimeout","testSupportsPassive","opts","addEventListener","e","supportsPassive","_","on","func","capture","passive","off","removeEventListener","loadImageAsync","resolve","reject","image","Image","src","Error","cors","crossOrigin","onload","naturalHeight","naturalWidth","onerror","style","prop","getComputedStyle","getPropertyValue","overflow","scrollParent","HTMLElement","parent","body","documentElement","test","isObject$1","ObjectKeys","keys","ArrayFrom","arrLike","list","noop","ImageCache","max","_caches","add","free","shift","ReactiveListener","error","loading","bindType","$parent","elRenderer","imageCache","attempt","rect","_imageCache","performanceData","init","loadStart","loadEnd","filter","initState","render","dataset","setAttribute","state","loaded","rendered","record","update","oldSrc","getRect","getBoundingClientRect","checkInView","top","innerHeight","preLoad","bottom","preLoadTop","left","innerWidth","right","renderLoading","cb","data","silent","console","warn","load","onFinish","log","adapter","cache","performance","time","$destroy","DEFAULT_URL","DEFAULT_EVENTS","DEFAULT_OBSERVER_OPTIONS","rootMargin","threshold","Lazy","Vue","throttleWait","dispatchEvent","listenEvents","hasbind","observerOptions","version","mode","ListenerQueue","TargetIndex","TargetQueue","ListenEvents","_initEvent","lazyLoadHandler","_lazyLoadHandler","bind","setMode","config","addLazyBox","vm","_addListenerTarget","_observer","observe","$el","binding","vnode","nextTick","_valueFormatter","modifiers","$refs","getElementById","newListener","arg","_elRenderer","exist","unobserve","existItem","_removeListenerTarget","removeComponent","forEach","listener","_initListen","_initIntersectionObserver","id","childrenCount","listened","start","listeners","$on","$once","$off","$emit","inCache","freeList","catIn","IntersectionObserver","_observerHandler","entries","entry","isIntersecting","install","LazyClass","lazy","isVue2","directive","componentUpdated","unbind","newValue","oldValue","$els","LazyComponent","props","tag","default","h","show","$slots","mounted","beforeDestroy","methods","destroy","component","LazyContainerMananger","lazyContainerMananger","_queue","LazyContainer","clear","defaultOptions","selector","imgs","getImgs","querySelectorAll","lazyContainer","LazyImage","lazyManager","attrs","renderSrc","watch","created","$Lazyload","lazyComponent","lazyImage"],"sources":["D:/Users/Rondo Lin/Desktop/sph/node_modules/vue-lazyload/vue-lazyload.esm.js"],"sourcesContent":["/*!\n * Vue-Lazyload.js v1.3.4\n * (c) 2021 Awe <hilongjw@gmail.com>\n * Released under the MIT License.\n */\n\n/*!\n * is-primitive <https://github.com/jonschlinkert/is-primitive>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n// see http://jsperf.com/testing-value-is-primitive/7\n\nvar isPrimitive = function isPrimitive(value) {\n  return value == null || typeof value !== 'function' && typeof value !== 'object';\n};\n\nvar isPrimitive$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': isPrimitive,\n  __moduleExports: isPrimitive\n});\n\n/*!\n * assign-symbols <https://github.com/jonschlinkert/assign-symbols>\n *\n * Copyright (c) 2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nvar assignSymbols = function (receiver, objects) {\n  if (receiver === null || typeof receiver === 'undefined') {\n    throw new TypeError('expected first argument to be an object.');\n  }\n\n  if (typeof objects === 'undefined' || typeof Symbol === 'undefined') {\n    return receiver;\n  }\n\n  if (typeof Object.getOwnPropertySymbols !== 'function') {\n    return receiver;\n  }\n\n  var isEnumerable = Object.prototype.propertyIsEnumerable;\n  var target = Object(receiver);\n  var len = arguments.length,\n      i = 0;\n\n  while (++i < len) {\n    var provider = Object(arguments[i]);\n    var names = Object.getOwnPropertySymbols(provider);\n\n    for (var j = 0; j < names.length; j++) {\n      var key = names[j];\n\n      if (isEnumerable.call(provider, key)) {\n        target[key] = provider[key];\n      }\n    }\n  }\n  return target;\n};\n\nvar assignSymbols$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': assignSymbols,\n  __moduleExports: assignSymbols\n});\n\nvar toString = Object.prototype.toString;\n\n/**\n * Get the native `typeof` a value.\n *\n * @param  {*} `val`\n * @return {*} Native javascript type\n */\n\nvar kindOf = function kindOf(val) {\n  var type = typeof val;\n\n  // primitivies\n  if (type === 'undefined') {\n    return 'undefined';\n  }\n  if (val === null) {\n    return 'null';\n  }\n  if (val === true || val === false || val instanceof Boolean) {\n    return 'boolean';\n  }\n  if (type === 'string' || val instanceof String) {\n    return 'string';\n  }\n  if (type === 'number' || val instanceof Number) {\n    return 'number';\n  }\n\n  // functions\n  if (type === 'function' || val instanceof Function) {\n    if (typeof val.constructor.name !== 'undefined' && val.constructor.name.slice(0, 9) === 'Generator') {\n      return 'generatorfunction';\n    }\n    return 'function';\n  }\n\n  // array\n  if (typeof Array.isArray !== 'undefined' && Array.isArray(val)) {\n    return 'array';\n  }\n\n  // check for instances of RegExp and Date before calling `toString`\n  if (val instanceof RegExp) {\n    return 'regexp';\n  }\n  if (val instanceof Date) {\n    return 'date';\n  }\n\n  // other objects\n  type = toString.call(val);\n\n  if (type === '[object RegExp]') {\n    return 'regexp';\n  }\n  if (type === '[object Date]') {\n    return 'date';\n  }\n  if (type === '[object Arguments]') {\n    return 'arguments';\n  }\n  if (type === '[object Error]') {\n    return 'error';\n  }\n  if (type === '[object Promise]') {\n    return 'promise';\n  }\n\n  // buffer\n  if (isBuffer(val)) {\n    return 'buffer';\n  }\n\n  // es6: Map, WeakMap, Set, WeakSet\n  if (type === '[object Set]') {\n    return 'set';\n  }\n  if (type === '[object WeakSet]') {\n    return 'weakset';\n  }\n  if (type === '[object Map]') {\n    return 'map';\n  }\n  if (type === '[object WeakMap]') {\n    return 'weakmap';\n  }\n  if (type === '[object Symbol]') {\n    return 'symbol';\n  }\n\n  if (type === '[object Map Iterator]') {\n    return 'mapiterator';\n  }\n  if (type === '[object Set Iterator]') {\n    return 'setiterator';\n  }\n  if (type === '[object String Iterator]') {\n    return 'stringiterator';\n  }\n  if (type === '[object Array Iterator]') {\n    return 'arrayiterator';\n  }\n\n  // typed arrays\n  if (type === '[object Int8Array]') {\n    return 'int8array';\n  }\n  if (type === '[object Uint8Array]') {\n    return 'uint8array';\n  }\n  if (type === '[object Uint8ClampedArray]') {\n    return 'uint8clampedarray';\n  }\n  if (type === '[object Int16Array]') {\n    return 'int16array';\n  }\n  if (type === '[object Uint16Array]') {\n    return 'uint16array';\n  }\n  if (type === '[object Int32Array]') {\n    return 'int32array';\n  }\n  if (type === '[object Uint32Array]') {\n    return 'uint32array';\n  }\n  if (type === '[object Float32Array]') {\n    return 'float32array';\n  }\n  if (type === '[object Float64Array]') {\n    return 'float64array';\n  }\n\n  // must be a plain object\n  return 'object';\n};\n\n/**\n * If you need to support Safari 5-7 (8-10 yr-old browser),\n * take a look at https://github.com/feross/is-buffer\n */\n\nfunction isBuffer(val) {\n  return val.constructor && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\nvar kindOf$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': kindOf,\n  __moduleExports: kindOf\n});\n\nvar isPrimitive$2 = ( isPrimitive$1 && isPrimitive ) || isPrimitive$1;\n\nvar assignSymbols$2 = ( assignSymbols$1 && assignSymbols ) || assignSymbols$1;\n\nvar typeOf = ( kindOf$1 && kindOf ) || kindOf$1;\n\nfunction assign(target /*, objects*/) {\n  target = target || {};\n  var len = arguments.length,\n      i = 0;\n  if (len === 1) {\n    return target;\n  }\n  while (++i < len) {\n    var val = arguments[i];\n    if (isPrimitive$2(target)) {\n      target = val;\n    }\n    if (isObject(val)) {\n      extend(target, val);\n    }\n  }\n  return target;\n}\n\n/**\n * Shallow extend\n */\n\nfunction extend(target, obj) {\n  assignSymbols$2(target, obj);\n\n  for (var key in obj) {\n    if (isValidKey(key) && hasOwn(obj, key)) {\n      var val = obj[key];\n      if (isObject(val)) {\n        if (typeOf(target[key]) === 'undefined' && typeOf(val) === 'function') {\n          target[key] = val;\n        }\n        target[key] = assign(target[key] || {}, val);\n      } else {\n        target[key] = val;\n      }\n    }\n  }\n  return target;\n}\n\n/**\n * Returns true if the object is a plain object or a function.\n */\n\nfunction isObject(obj) {\n  return typeOf(obj) === 'object' || typeOf(obj) === 'function';\n}\n\n/**\n * Returns true if the given `key` is an own property of `obj`.\n */\n\nfunction hasOwn(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\n/**\n * Returns true if the given `key` is a valid key that can be used for assigning properties.\n */\n\nfunction isValidKey(key) {\n  return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n}\n\n/**\n * Expose `assign`\n */\n\nvar assignDeep = assign;\n\nconst inBrowser = typeof window !== 'undefined' && window !== null;\n\nconst hasIntersectionObserver = checkIntersectionObserver();\n\nfunction checkIntersectionObserver() {\n  if (inBrowser && 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/w3c/IntersectionObserver/issues/211\n    if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get: function () {\n          return this.intersectionRatio > 0;\n        }\n      });\n    }\n    return true;\n  }\n  return false;\n}\n\nconst modeType = {\n  event: 'event',\n  observer: 'observer'\n\n  // CustomEvent polyfill for IE\n};const CustomEvent = function () {\n  if (!inBrowser) return;\n  // not IE\n  if (typeof window.CustomEvent === 'function') return window.CustomEvent;\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: undefined };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  return CustomEvent;\n}();\n\nfunction remove(arr, item) {\n  if (!arr.length) return;\n  const index = arr.indexOf(item);\n  if (index > -1) return arr.splice(index, 1);\n}\n\nfunction some(arr, fn) {\n  let has = false;\n  for (let i = 0, len = arr.length; i < len; i++) {\n    if (fn(arr[i])) {\n      has = true;\n      break;\n    }\n  }\n  return has;\n}\n\nfunction getBestSelectionFromSrcset(el, scale) {\n  if (el.tagName !== 'IMG' || !el.getAttribute('data-srcset')) return;\n\n  let options = el.getAttribute('data-srcset');\n  const result = [];\n  const container = el.parentNode;\n  const containerWidth = container.offsetWidth * scale;\n\n  let spaceIndex;\n  let tmpSrc;\n  let tmpWidth;\n\n  options = options.trim().split(',');\n\n  options.map(item => {\n    item = item.trim();\n    spaceIndex = item.lastIndexOf(' ');\n    if (spaceIndex === -1) {\n      tmpSrc = item;\n      tmpWidth = 999998;\n    } else {\n      tmpSrc = item.substr(0, spaceIndex);\n      tmpWidth = parseInt(item.substr(spaceIndex + 1, item.length - spaceIndex - 2), 10);\n    }\n    result.push([tmpWidth, tmpSrc]);\n  });\n\n  result.sort(function (a, b) {\n    if (a[0] < b[0]) {\n      return 1;\n    }\n    if (a[0] > b[0]) {\n      return -1;\n    }\n    if (a[0] === b[0]) {\n      if (b[1].indexOf('.webp', b[1].length - 5) !== -1) {\n        return 1;\n      }\n      if (a[1].indexOf('.webp', a[1].length - 5) !== -1) {\n        return -1;\n      }\n    }\n    return 0;\n  });\n  let bestSelectedSrc = '';\n  let tmpOption;\n\n  for (let i = 0; i < result.length; i++) {\n    tmpOption = result[i];\n    bestSelectedSrc = tmpOption[1];\n    const next = result[i + 1];\n    if (next && next[0] < containerWidth) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    } else if (!next) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    }\n  }\n\n  return bestSelectedSrc;\n}\n\nfunction find(arr, fn) {\n  let item;\n  for (let i = 0, len = arr.length; i < len; i++) {\n    if (fn(arr[i])) {\n      item = arr[i];\n      break;\n    }\n  }\n  return item;\n}\n\nconst getDPR = (scale = 1) => inBrowser ? window.devicePixelRatio || scale : scale;\n\nfunction supportWebp() {\n  if (!inBrowser) return false;\n\n  let support = true;\n\n  try {\n    const elem = document.createElement('canvas');\n\n    if (elem.getContext && elem.getContext('2d')) {\n      support = elem.toDataURL('image/webp').indexOf('data:image/webp') === 0;\n    }\n  } catch (err) {\n    support = false;\n  }\n\n  return support;\n}\n\nfunction throttle(action, delay) {\n  let timeout = null;\n  let movement = null;\n  let lastRun = 0;\n  let needRun = false;\n  return function () {\n    needRun = true;\n    if (timeout) {\n      return;\n    }\n    let elapsed = Date.now() - lastRun;\n    let context = this;\n    let args = arguments;\n    let runCallback = function () {\n      lastRun = Date.now();\n      timeout = false;\n      action.apply(context, args);\n    };\n    if (elapsed >= delay) {\n      runCallback();\n    } else {\n      timeout = setTimeout(runCallback, delay);\n    }\n    if (needRun) {\n      clearTimeout(movement);\n      movement = setTimeout(runCallback, 2 * delay);\n    }\n  };\n}\n\nfunction testSupportsPassive() {\n  if (!inBrowser) return;\n  let support = false;\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        support = true;\n      }\n    });\n    window.addEventListener('test', null, opts);\n  } catch (e) {}\n  return support;\n}\n\nconst supportsPassive = testSupportsPassive();\n\nconst _ = {\n  on(el, type, func, capture = false) {\n    if (supportsPassive) {\n      el.addEventListener(type, func, {\n        capture: capture,\n        passive: true\n      });\n    } else {\n      el.addEventListener(type, func, capture);\n    }\n  },\n  off(el, type, func, capture = false) {\n    el.removeEventListener(type, func, capture);\n  }\n};\n\nconst loadImageAsync = (item, resolve, reject) => {\n  let image = new Image();\n  if (!item || !item.src) {\n    const err = new Error('image src is required');\n    return reject(err);\n  }\n\n  image.src = item.src;\n  if (item.cors) {\n    image.crossOrigin = item.cors;\n  }\n\n  image.onload = function () {\n    resolve({\n      naturalHeight: image.naturalHeight,\n      naturalWidth: image.naturalWidth,\n      src: image.src\n    });\n  };\n\n  image.onerror = function (e) {\n    reject(e);\n  };\n};\n\nconst style = (el, prop) => {\n  return typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop];\n};\n\nconst overflow = el => {\n  return style(el, 'overflow') + style(el, 'overflow-y') + style(el, 'overflow-x');\n};\n\nconst scrollParent = el => {\n  if (!inBrowser) return;\n  if (!(el instanceof HTMLElement)) {\n    return window;\n  }\n\n  let parent = el;\n\n  while (parent) {\n    if (parent === document.body || parent === document.documentElement) {\n      break;\n    }\n\n    if (!parent.parentNode) {\n      break;\n    }\n\n    if (/(scroll|auto)/.test(overflow(parent))) {\n      return parent;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return window;\n};\n\nfunction isObject$1(obj) {\n  return obj !== null && typeof obj === 'object';\n}\n\nfunction ObjectKeys(obj) {\n  if (!(obj instanceof Object)) return [];\n  if (Object.keys) {\n    return Object.keys(obj);\n  } else {\n    let keys = [];\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        keys.push(key);\n      }\n    }\n    return keys;\n  }\n}\n\nfunction ArrayFrom(arrLike) {\n  let len = arrLike.length;\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(arrLike[i]);\n  }\n  return list;\n}\n\nfunction noop() {}\n\nclass ImageCache {\n  constructor({ max }) {\n    this.options = {\n      max: max || 100\n    };\n    this._caches = [];\n  }\n\n  has(key) {\n    return this._caches.indexOf(key) > -1;\n  }\n\n  add(key) {\n    if (this.has(key)) return;\n    this._caches.push(key);\n    if (this._caches.length > this.options.max) {\n      this.free();\n    }\n  }\n\n  free() {\n    this._caches.shift();\n  }\n}\n\n// el: {\n//     state,\n//     src,\n//     error,\n//     loading\n// }\n\nclass ReactiveListener {\n  constructor({ el, src, error, loading, bindType, $parent, options, cors, elRenderer, imageCache }) {\n    this.el = el;\n    this.src = src;\n    this.error = error;\n    this.loading = loading;\n    this.bindType = bindType;\n    this.attempt = 0;\n    this.cors = cors;\n\n    this.naturalHeight = 0;\n    this.naturalWidth = 0;\n\n    this.options = options;\n\n    this.rect = null;\n\n    this.$parent = $parent;\n    this.elRenderer = elRenderer;\n    this._imageCache = imageCache;\n    this.performanceData = {\n      init: Date.now(),\n      loadStart: 0,\n      loadEnd: 0\n    };\n\n    this.filter();\n    this.initState();\n    this.render('loading', false);\n  }\n\n  /*\n   * init listener state\n   * @return\n   */\n  initState() {\n    if ('dataset' in this.el) {\n      this.el.dataset.src = this.src;\n    } else {\n      this.el.setAttribute('data-src', this.src);\n    }\n\n    this.state = {\n      loading: false,\n      error: false,\n      loaded: false,\n      rendered: false\n    };\n  }\n\n  /*\n   * record performance\n   * @return\n   */\n  record(event) {\n    this.performanceData[event] = Date.now();\n  }\n\n  /*\n   * update image listener data\n   * @param  {String} image uri\n   * @param  {String} loading image uri\n   * @param  {String} error image uri\n   * @return\n   */\n  update({ src, loading, error }) {\n    const oldSrc = this.src;\n    this.src = src;\n    this.loading = loading;\n    this.error = error;\n    this.filter();\n    if (oldSrc !== this.src) {\n      this.attempt = 0;\n      this.initState();\n    }\n  }\n\n  /*\n   * get el node rect\n   * @return\n   */\n  getRect() {\n    this.rect = this.el.getBoundingClientRect();\n  }\n\n  /*\n   *  check el is in view\n   * @return {Boolean} el is in view\n   */\n  checkInView() {\n    this.getRect();\n    return this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;\n  }\n\n  /*\n   * listener filter\n   */\n  filter() {\n    ObjectKeys(this.options.filter).map(key => {\n      this.options.filter[key](this, this.options);\n    });\n  }\n\n  /*\n   * render loading first\n   * @params cb:Function\n   * @return\n   */\n  renderLoading(cb) {\n    this.state.loading = true;\n    loadImageAsync({\n      src: this.loading,\n      cors: this.cors\n    }, data => {\n      this.render('loading', false);\n      this.state.loading = false;\n      cb();\n    }, () => {\n      // handler `loading image` load failed\n      cb();\n      this.state.loading = false;\n      if (!this.options.silent) console.warn(`VueLazyload log: load failed with loading image(${this.loading})`);\n    });\n  }\n\n  /*\n   * try load image and  render it\n   * @return\n   */\n  load(onFinish = noop) {\n    if (this.attempt > this.options.attempt - 1 && this.state.error) {\n      if (!this.options.silent) console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`);\n      onFinish();\n      return;\n    }\n    if (this.state.rendered && this.state.loaded) return;\n    if (this._imageCache.has(this.src)) {\n      this.state.loaded = true;\n      this.render('loaded', true);\n      this.state.rendered = true;\n      return onFinish();\n    }\n\n    this.renderLoading(() => {\n      this.attempt++;\n\n      this.options.adapter['beforeLoad'] && this.options.adapter['beforeLoad'](this, this.options);\n      this.record('loadStart');\n\n      loadImageAsync({\n        src: this.src,\n        cors: this.cors\n      }, data => {\n        this.naturalHeight = data.naturalHeight;\n        this.naturalWidth = data.naturalWidth;\n        this.state.loaded = true;\n        this.state.error = false;\n        this.record('loadEnd');\n        this.render('loaded', false);\n        this.state.rendered = true;\n        this._imageCache.add(this.src);\n        onFinish();\n      }, err => {\n        !this.options.silent && console.error(err);\n        this.state.error = true;\n        this.state.loaded = false;\n        this.render('error', false);\n      });\n    });\n  }\n\n  /*\n   * render image\n   * @param  {String} state to render // ['loading', 'src', 'error']\n   * @param  {String} is form cache\n   * @return\n   */\n  render(state, cache) {\n    this.elRenderer(this, state, cache);\n  }\n\n  /*\n   * output performance data\n   * @return {Object} performance data\n   */\n  performance() {\n    let state = 'loading';\n    let time = 0;\n\n    if (this.state.loaded) {\n      state = 'loaded';\n      time = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1000;\n    }\n\n    if (this.state.error) state = 'error';\n\n    return {\n      src: this.src,\n      state,\n      time\n    };\n  }\n\n  /*\n   * $destroy\n   * @return\n   */\n  $destroy() {\n    this.el = null;\n    this.src = null;\n    this.error = null;\n    this.loading = null;\n    this.bindType = null;\n    this.attempt = 0;\n  }\n}\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nconst DEFAULT_EVENTS = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'];\nconst DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: '0px',\n  threshold: 0\n};\n\nfunction Lazy(Vue) {\n  return class Lazy {\n    constructor({ preLoad, error, throttleWait, preLoadTop, dispatchEvent, loading, attempt, silent = true, scale, listenEvents, hasbind, filter, adapter, observer, observerOptions }) {\n      this.version = '\"1.3.4\"';\n      this.mode = modeType.event;\n      this.ListenerQueue = [];\n      this.TargetIndex = 0;\n      this.TargetQueue = [];\n      this.options = {\n        silent: silent,\n        dispatchEvent: !!dispatchEvent,\n        throttleWait: throttleWait || 200,\n        preLoad: preLoad || 1.3,\n        preLoadTop: preLoadTop || 0,\n        error: error || DEFAULT_URL,\n        loading: loading || DEFAULT_URL,\n        attempt: attempt || 3,\n        scale: scale || getDPR(scale),\n        ListenEvents: listenEvents || DEFAULT_EVENTS,\n        hasbind: false,\n        supportWebp: supportWebp(),\n        filter: filter || {},\n        adapter: adapter || {},\n        observer: !!observer,\n        observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n      };\n      this._initEvent();\n      this._imageCache = new ImageCache({ max: 200 });\n      this.lazyLoadHandler = throttle(this._lazyLoadHandler.bind(this), this.options.throttleWait);\n\n      this.setMode(this.options.observer ? modeType.observer : modeType.event);\n    }\n\n    /**\n     * update config\n     * @param  {Object} config params\n     * @return\n     */\n    config(options = {}) {\n      assignDeep(this.options, options);\n    }\n\n    /**\n     * output listener's load performance\n     * @return {Array}\n     */\n    performance() {\n      let list = [];\n\n      this.ListenerQueue.map(item => {\n        list.push(item.performance());\n      });\n\n      return list;\n    }\n\n    /*\n     * add lazy component to queue\n     * @param  {Vue} vm lazy component instance\n     * @return\n     */\n    addLazyBox(vm) {\n      this.ListenerQueue.push(vm);\n      if (inBrowser) {\n        this._addListenerTarget(window);\n        this._observer && this._observer.observe(vm.el);\n        if (vm.$el && vm.$el.parentNode) {\n          this._addListenerTarget(vm.$el.parentNode);\n        }\n      }\n    }\n\n    /*\n     * add image listener to queue\n     * @param  {DOM} el\n     * @param  {object} binding vue directive binding\n     * @param  {vnode} vnode vue directive vnode\n     * @return\n     */\n    add(el, binding, vnode) {\n      if (some(this.ListenerQueue, item => item.el === el)) {\n        this.update(el, binding);\n        return Vue.nextTick(this.lazyLoadHandler);\n      }\n\n      let { src, loading, error, cors } = this._valueFormatter(binding.value);\n\n      Vue.nextTick(() => {\n        src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n        this._observer && this._observer.observe(el);\n\n        const container = Object.keys(binding.modifiers)[0];\n        let $parent;\n\n        if (container) {\n          $parent = vnode.context.$refs[container];\n          // if there is container passed in, try ref first, then fallback to getElementById to support the original usage\n          $parent = $parent ? $parent.$el || $parent : document.getElementById(container);\n        }\n\n        if (!$parent) {\n          $parent = scrollParent(el);\n        }\n\n        const newListener = new ReactiveListener({\n          bindType: binding.arg,\n          $parent,\n          el,\n          loading,\n          error,\n          src,\n          cors,\n          elRenderer: this._elRenderer.bind(this),\n          options: this.options,\n          imageCache: this._imageCache\n        });\n\n        this.ListenerQueue.push(newListener);\n\n        if (inBrowser) {\n          this._addListenerTarget(window);\n          this._addListenerTarget($parent);\n        }\n\n        this.lazyLoadHandler();\n        Vue.nextTick(() => this.lazyLoadHandler());\n      });\n    }\n\n    /**\n    * update image src\n    * @param  {DOM} el\n    * @param  {object} vue directive binding\n    * @return\n    */\n    update(el, binding, vnode) {\n      let { src, loading, error } = this._valueFormatter(binding.value);\n      src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n\n      const exist = find(this.ListenerQueue, item => item.el === el);\n      if (!exist) {\n        this.add(el, binding, vnode);\n      } else {\n        exist.update({\n          src,\n          loading,\n          error\n        });\n      }\n      if (this._observer) {\n        this._observer.unobserve(el);\n        this._observer.observe(el);\n      }\n      this.lazyLoadHandler();\n      Vue.nextTick(() => this.lazyLoadHandler());\n    }\n\n    /**\n    * remove listener form list\n    * @param  {DOM} el\n    * @return\n    */\n    remove(el) {\n      if (!el) return;\n      this._observer && this._observer.unobserve(el);\n      const existItem = find(this.ListenerQueue, item => item.el === el);\n      if (existItem) {\n        this._removeListenerTarget(existItem.$parent);\n        this._removeListenerTarget(window);\n        remove(this.ListenerQueue, existItem);\n        existItem.$destroy();\n      }\n    }\n\n    /*\n     * remove lazy components form list\n     * @param  {Vue} vm Vue instance\n     * @return\n     */\n    removeComponent(vm) {\n      if (!vm) return;\n      remove(this.ListenerQueue, vm);\n      this._observer && this._observer.unobserve(vm.el);\n      if (vm.$parent && vm.$el.parentNode) {\n        this._removeListenerTarget(vm.$el.parentNode);\n      }\n      this._removeListenerTarget(window);\n    }\n\n    setMode(mode) {\n      if (!hasIntersectionObserver && mode === modeType.observer) {\n        mode = modeType.event;\n      }\n\n      this.mode = mode; // event or observer\n\n      if (mode === modeType.event) {\n        if (this._observer) {\n          this.ListenerQueue.forEach(listener => {\n            this._observer.unobserve(listener.el);\n          });\n          this._observer = null;\n        }\n\n        this.TargetQueue.forEach(target => {\n          this._initListen(target.el, true);\n        });\n      } else {\n        this.TargetQueue.forEach(target => {\n          this._initListen(target.el, false);\n        });\n        this._initIntersectionObserver();\n      }\n    }\n\n    /*\n    *** Private functions ***\n    */\n\n    /*\n     * add listener target\n     * @param  {DOM} el listener target\n     * @return\n     */\n    _addListenerTarget(el) {\n      if (!el) return;\n      let target = find(this.TargetQueue, target => target.el === el);\n      if (!target) {\n        target = {\n          el: el,\n          id: ++this.TargetIndex,\n          childrenCount: 1,\n          listened: true\n        };\n        this.mode === modeType.event && this._initListen(target.el, true);\n        this.TargetQueue.push(target);\n      } else {\n        target.childrenCount++;\n      }\n      return this.TargetIndex;\n    }\n\n    /*\n     * remove listener target or reduce target childrenCount\n     * @param  {DOM} el or window\n     * @return\n     */\n    _removeListenerTarget(el) {\n      this.TargetQueue.forEach((target, index) => {\n        if (target.el === el) {\n          target.childrenCount--;\n          if (!target.childrenCount) {\n            this._initListen(target.el, false);\n            this.TargetQueue.splice(index, 1);\n            target = null;\n          }\n        }\n      });\n    }\n\n    /*\n     * add or remove eventlistener\n     * @param  {DOM} el DOM or Window\n     * @param  {boolean} start flag\n     * @return\n     */\n    _initListen(el, start) {\n      this.options.ListenEvents.forEach(evt => _[start ? 'on' : 'off'](el, evt, this.lazyLoadHandler));\n    }\n\n    _initEvent() {\n      this.Event = {\n        listeners: {\n          loading: [],\n          loaded: [],\n          error: []\n        }\n      };\n\n      this.$on = (event, func) => {\n        if (!this.Event.listeners[event]) this.Event.listeners[event] = [];\n        this.Event.listeners[event].push(func);\n      };\n\n      this.$once = (event, func) => {\n        const vm = this;\n        function on() {\n          vm.$off(event, on);\n          func.apply(vm, arguments);\n        }\n        this.$on(event, on);\n      };\n\n      this.$off = (event, func) => {\n        if (!func) {\n          if (!this.Event.listeners[event]) return;\n          this.Event.listeners[event].length = 0;\n          return;\n        }\n        remove(this.Event.listeners[event], func);\n      };\n\n      this.$emit = (event, context, inCache) => {\n        if (!this.Event.listeners[event]) return;\n        this.Event.listeners[event].forEach(func => func(context, inCache));\n      };\n    }\n\n    /**\n     * find nodes which in viewport and trigger load\n     * @return\n     */\n    _lazyLoadHandler() {\n      const freeList = [];\n      this.ListenerQueue.forEach((listener, index) => {\n        if (!listener.el || !listener.el.parentNode) {\n          freeList.push(listener);\n        }\n        const catIn = listener.checkInView();\n        if (!catIn) return;\n        listener.load();\n      });\n      freeList.forEach(item => {\n        remove(this.ListenerQueue, item);\n        item.$destroy();\n      });\n    }\n    /**\n    * init IntersectionObserver\n    * set mode to observer\n    * @return\n    */\n    _initIntersectionObserver() {\n      if (!hasIntersectionObserver) return;\n      this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions);\n      if (this.ListenerQueue.length) {\n        this.ListenerQueue.forEach(listener => {\n          this._observer.observe(listener.el);\n        });\n      }\n    }\n\n    /**\n    * init IntersectionObserver\n    * @return\n    */\n    _observerHandler(entries, observer) {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.ListenerQueue.forEach(listener => {\n            if (listener.el === entry.target) {\n              if (listener.state.loaded) return this._observer.unobserve(listener.el);\n              listener.load();\n            }\n          });\n        }\n      });\n    }\n\n    /**\n    * set element attribute with image'url and state\n    * @param  {object} lazyload listener object\n    * @param  {string} state will be rendered\n    * @param  {bool} inCache  is rendered from cache\n    * @return\n    */\n    _elRenderer(listener, state, cache) {\n      if (!listener.el) return;\n      const { el, bindType } = listener;\n\n      let src;\n      switch (state) {\n        case 'loading':\n          src = listener.loading;\n          break;\n        case 'error':\n          src = listener.error;\n          break;\n        default:\n          src = listener.src;\n          break;\n      }\n\n      if (bindType) {\n        el.style[bindType] = 'url(\"' + src + '\")';\n      } else if (el.getAttribute('src') !== src) {\n        el.setAttribute('src', src);\n      }\n\n      el.setAttribute('lazy', state);\n\n      this.$emit(state, listener, cache);\n      this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n\n      if (this.options.dispatchEvent) {\n        const event = new CustomEvent(state, {\n          detail: listener\n        });\n        el.dispatchEvent(event);\n      }\n    }\n\n    /**\n    * generate loading loaded error image url\n    * @param {string} image's src\n    * @return {object} image's loading, loaded, error url\n    */\n    _valueFormatter(value) {\n      let src = value;\n      let loading = this.options.loading;\n      let error = this.options.error;\n\n      // value is object\n      if (isObject$1(value)) {\n        if (!value.src && !this.options.silent) console.error('Vue Lazyload warning: miss src with ' + value);\n        src = value.src;\n        loading = value.loading || this.options.loading;\n        error = value.error || this.options.error;\n      }\n      return {\n        src,\n        loading,\n        error\n      };\n    }\n  };\n}\n\nLazy.install = (Vue, options = {}) => {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n\n  const isVue2 = Vue.version.split('.')[0] === '2';\n  if (isVue2) {\n    Vue.directive('lazy', {\n      bind: lazy.add.bind(lazy),\n      update: lazy.update.bind(lazy),\n      componentUpdated: lazy.lazyLoadHandler.bind(lazy),\n      unbind: lazy.remove.bind(lazy)\n    });\n  } else {\n    Vue.directive('lazy', {\n      bind: lazy.lazyLoadHandler.bind(lazy),\n      update(newValue, oldValue) {\n        assignDeep(this.vm.$refs, this.vm.$els);\n        lazy.add(this.el, {\n          modifiers: this.modifiers || {},\n          arg: this.arg,\n          value: newValue,\n          oldValue: oldValue\n        }, {\n          context: this.vm\n        });\n      },\n      unbind() {\n        lazy.remove(this.el);\n      }\n    });\n  }\n};\n\nconst LazyComponent = lazy => {\n  return {\n    props: {\n      tag: {\n        type: String,\n        default: 'div'\n      }\n    },\n    render(h) {\n      return h(this.tag, null, this.show ? this.$slots.default : null);\n    },\n    data() {\n      return {\n        el: null,\n        state: {\n          loaded: false\n        },\n        rect: {},\n        show: false\n      };\n    },\n    mounted() {\n      this.el = this.$el;\n      lazy.addLazyBox(this);\n      lazy.lazyLoadHandler();\n    },\n    beforeDestroy() {\n      lazy.removeComponent(this);\n    },\n    methods: {\n      getRect() {\n        this.rect = this.$el.getBoundingClientRect();\n      },\n      checkInView() {\n        this.getRect();\n        return inBrowser && this.rect.top < window.innerHeight * lazy.options.preLoad && this.rect.bottom > 0 && this.rect.left < window.innerWidth * lazy.options.preLoad && this.rect.right > 0;\n      },\n      load() {\n        this.show = true;\n        this.state.loaded = true;\n        this.$emit('show', this);\n      },\n      destroy() {\n        return this.$destroy;\n      }\n    }\n  };\n};\n\nLazyComponent.install = function (Vue, options = {}) {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  Vue.component('lazy-component', LazyComponent(lazy));\n};\n\nclass LazyContainerMananger {\n  constructor({ lazy }) {\n    this.lazy = lazy;\n    lazy.lazyContainerMananger = this;\n    this._queue = [];\n  }\n\n  bind(el, binding, vnode) {\n    const container = new LazyContainer({ el, binding, vnode, lazy: this.lazy });\n    this._queue.push(container);\n  }\n\n  update(el, binding, vnode) {\n    const container = find(this._queue, item => item.el === el);\n    if (!container) return;\n    container.update({ el, binding, vnode });\n  }\n\n  unbind(el, binding, vnode) {\n    const container = find(this._queue, item => item.el === el);\n    if (!container) return;\n    container.clear();\n    remove(this._queue, container);\n  }\n}\n\nconst defaultOptions = {\n  selector: 'img'\n};\n\nclass LazyContainer {\n  constructor({ el, binding, vnode, lazy }) {\n    this.el = null;\n    this.vnode = vnode;\n    this.binding = binding;\n    this.options = {};\n    this.lazy = lazy;\n\n    this._queue = [];\n    this.update({ el, binding });\n  }\n\n  update({ el, binding }) {\n    this.el = el;\n    this.options = assignDeep({}, defaultOptions, binding.value);\n\n    const imgs = this.getImgs();\n    imgs.forEach(el => {\n      this.lazy.add(el, assignDeep({}, this.binding, {\n        value: {\n          src: 'dataset' in el ? el.dataset.src : el.getAttribute('data-src'),\n          error: ('dataset' in el ? el.dataset.error : el.getAttribute('data-error')) || this.options.error,\n          loading: ('dataset' in el ? el.dataset.loading : el.getAttribute('data-loading')) || this.options.loading\n        }\n      }), this.vnode);\n    });\n  }\n\n  getImgs() {\n    return ArrayFrom(this.el.querySelectorAll(this.options.selector));\n  }\n\n  clear() {\n    const imgs = this.getImgs();\n    imgs.forEach(el => this.lazy.remove(el));\n\n    this.vnode = null;\n    this.binding = null;\n    this.lazy = null;\n  }\n}\n\nLazyContainer.install = (Vue, options = {}) => {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  const lazyContainer = new LazyContainer({ lazy });\n\n  const isVue2 = Vue.version.split('.')[0] === '2';\n  if (isVue2) {\n    Vue.directive('lazy-container', {\n      bind: lazyContainer.bind.bind(lazyContainer),\n      componentUpdated: lazyContainer.update.bind(lazyContainer),\n      unbind: lazyContainer.unbind.bind(lazyContainer)\n    });\n  } else {\n    Vue.directive('lazy-container', {\n      update(newValue, oldValue) {\n        lazyContainer.update(this.el, {\n          modifiers: this.modifiers || {},\n          arg: this.arg,\n          value: newValue,\n          oldValue: oldValue\n        }, {\n          context: this.vm\n        });\n      },\n      unbind() {\n        lazyContainer.unbind(this.el);\n      }\n    });\n  }\n};\n\nconst LazyImage = lazyManager => {\n  return {\n    props: {\n      src: [String, Object],\n      tag: {\n        type: String,\n        default: 'img'\n      }\n    },\n    render(h) {\n      return h(this.tag, {\n        attrs: {\n          src: this.renderSrc\n        }\n      }, this.$slots.default);\n    },\n    data() {\n      return {\n        el: null,\n        options: {\n          src: '',\n          error: '',\n          loading: '',\n          attempt: lazyManager.options.attempt\n        },\n        state: {\n          loaded: false,\n          error: false,\n          attempt: 0\n        },\n        rect: {},\n        renderSrc: ''\n      };\n    },\n    watch: {\n      src() {\n        this.init();\n        lazyManager.addLazyBox(this);\n        lazyManager.lazyLoadHandler();\n      }\n    },\n    created() {\n      this.init();\n      this.renderSrc = this.options.loading;\n    },\n    mounted() {\n      this.el = this.$el;\n      lazyManager.addLazyBox(this);\n      lazyManager.lazyLoadHandler();\n    },\n    beforeDestroy() {\n      lazyManager.removeComponent(this);\n    },\n    methods: {\n      init() {\n        const { src, loading, error } = lazyManager._valueFormatter(this.src);\n        this.state.loaded = false;\n        this.options.src = src;\n        this.options.error = error;\n        this.options.loading = loading;\n        this.renderSrc = this.options.loading;\n      },\n      getRect() {\n        this.rect = this.$el.getBoundingClientRect();\n      },\n      checkInView() {\n        this.getRect();\n        return inBrowser && this.rect.top < window.innerHeight * lazyManager.options.preLoad && this.rect.bottom > 0 && this.rect.left < window.innerWidth * lazyManager.options.preLoad && this.rect.right > 0;\n      },\n      load(onFinish = noop) {\n        if (this.state.attempt > this.options.attempt - 1 && this.state.error) {\n          if (!lazyManager.options.silent) console.log(`VueLazyload log: ${this.options.src} tried too more than ${this.options.attempt} times`);\n          onFinish();\n          return;\n        }\n        const src = this.options.src;\n        loadImageAsync({ src }, ({ src }) => {\n          this.renderSrc = src;\n          this.state.loaded = true;\n        }, e => {\n          this.state.attempt++;\n          this.renderSrc = this.options.error;\n          this.state.error = true;\n        });\n      }\n    }\n  };\n};\n\nLazyImage.install = (Vue, options = {}) => {\n  const LazyClass = Lazy(Vue);\n  const lazy = new LazyClass(options);\n  Vue.component('lazy-image', LazyImage(lazy));\n};\n\nvar index = {\n  /*\n  * install function\n  * @param  {Vue} Vue\n  * @param  {object} options  lazyload options\n  */\n  install(Vue, options = {}) {\n    const LazyClass = Lazy(Vue);\n    const lazy = new LazyClass(options);\n    const lazyContainer = new LazyContainerMananger({ lazy });\n\n    const isVue2 = Vue.version.split('.')[0] === '2';\n\n    Vue.prototype.$Lazyload = lazy;\n\n    if (options.lazyComponent) {\n      Vue.component('lazy-component', LazyComponent(lazy));\n    }\n\n    if (options.lazyImage) {\n      Vue.component('lazy-image', LazyImage(lazy));\n    }\n\n    if (isVue2) {\n      Vue.directive('lazy', {\n        bind: lazy.add.bind(lazy),\n        update: lazy.update.bind(lazy),\n        componentUpdated: lazy.lazyLoadHandler.bind(lazy),\n        unbind: lazy.remove.bind(lazy)\n      });\n      Vue.directive('lazy-container', {\n        bind: lazyContainer.bind.bind(lazyContainer),\n        componentUpdated: lazyContainer.update.bind(lazyContainer),\n        unbind: lazyContainer.unbind.bind(lazyContainer)\n      });\n    } else {\n      Vue.directive('lazy', {\n        bind: lazy.lazyLoadHandler.bind(lazy),\n        update(newValue, oldValue) {\n          assignDeep(this.vm.$refs, this.vm.$els);\n          lazy.add(this.el, {\n            modifiers: this.modifiers || {},\n            arg: this.arg,\n            value: newValue,\n            oldValue: oldValue\n          }, {\n            context: this.vm\n          });\n        },\n        unbind() {\n          lazy.remove(this.el);\n        }\n      });\n\n      Vue.directive('lazy-container', {\n        update(newValue, oldValue) {\n          lazyContainer.update(this.el, {\n            modifiers: this.modifiers || {},\n            arg: this.arg,\n            value: newValue,\n            oldValue: oldValue\n          }, {\n            context: this.vm\n          });\n        },\n        unbind() {\n          lazyContainer.unbind(this.el);\n        }\n      });\n    }\n  }\n};\n\nexport default index;\nexport { Lazy, LazyComponent, LazyContainerMananger as LazyContainer, LazyImage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}